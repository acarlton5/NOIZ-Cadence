<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Viewer</title>
<style>
  html,body{height:100%;margin:0;background:radial-gradient(600px 400px at 50% 20%, #241a66 0%, #120a38 70%);}
  .fake{position:absolute;inset:0;display:grid;place-items:center;color:#cfc9ff;font-family:system-ui,Segoe UI,Inter,Roboto,Arial;}
  .avatar{
    width:260px;height:420px;border-radius:18px;
    background:linear-gradient(160deg,#6b57ff 0%,#8b7bff 40%, #2a1f7a 41%, #1a144e 100%);
    box-shadow:0 20px 60px rgba(0,0,0,.45);
    position:relative; overflow:hidden;
  }
  .avatar:before{
    content:""; position:absolute; inset:0;
    background: radial-gradient(220px 120px at 70% 30%, rgba(255,255,255,.18), transparent 60%);
  }
  .tag{position:absolute; bottom:10px; left:50%; transform:translateX(-50%);
       background:rgba(0,0,0,.35); padding:6px 10px; border-radius:999px; font-size:12px;}
</style>
</head>
<body>
<div class="fake">
  <div>
    <div class="avatar" id="avatar"></div>
    <div class="tag" id="tag">No items equipped</div>
  </div>
</div>
<script>
  const equipped = {};
  function setTag(){
    const keys = Object.keys(equipped);
    document.getElementById('tag').textContent = keys.length ? 
      'Equipped: ' + keys.join(', ') : 'No items equipped';
  }
  window.addEventListener('message', (e)=>{
    const {type, payload} = e.data || {};
    if(type==='equip'){
      equipped[payload.slot] = payload.id;
      setTag();
    } else if(type==='reset'){
      for(const k in equipped) delete equipped[k];
      setTag();
    } else if(type==='save'){
      parent.postMessage({type:'preset', payload:{equipped}}, '*');
    }
  });
  parent.postMessage({type:'ready'}, '*');
</script>
</body>
</html>
